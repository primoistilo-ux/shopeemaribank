{% extends "base.html" %}
{% block title %}Enter PIN{% endblock %}

{% block content %}
  <p class="subtitle">Enter your 6-digit PIN</p>

  <form method="POST" id="pinForm">
    <div class="field">
      <label class="label">PIN</label>
      <input
        class="input"
        type="password"
        name="pin"
        maxlength="6"
        inputmode="numeric"
        placeholder=""
        required
        id="pinInput"
      >
    </div>

    <button class="btn" type="submit" id="pinBtn">
      <span class="btnSpinner"></span>
      <span class="btnText">Continue</span>
    </button>

    <div class="hint">Do not share your PIN with anyone.</div>
  </form>
{% endblock %}

{% block scripts %}
<script>
  // numbers only
  const pinInput = document.getElementById("pinInput");
  pinInput.addEventListener("input", () => {
    pinInput.value = pinInput.value.replace(/\D/g, "").slice(0, 6);
  });

  const pinForm = document.getElementById("pinForm");
  const pinBtn = document.getElementById("pinBtn");
  const pinBtnText = pinBtn.querySelector(".btnText");

  // âœ… 2 seconds delay on submit
  pinForm.addEventListener("submit", (e) => {
    e.preventDefault();
    pinBtn.classList.add("loading");
    pinBtn.disabled = true;
    pinBtnText.textContent = "Loading...";
    setTimeout(() => pinForm.submit(), 2000);
  });
</script>
{% endblock %}
